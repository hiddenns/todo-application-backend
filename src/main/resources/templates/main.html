<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo Application</title>

    <link rel="stylesheet" href="" th:href="@{/css/main.css}">
    <script src="https://kit.fontawesome.com/c06eb18ae1.js" crossorigin="anonymous"></script>
</head>

<body>

<svg id="defs" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <symbol class="icon icon-checked" id="icon-checked" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <polyline points="20 6 9 17 4 12"></polyline>
        </symbol>
        <symbol class="icon icon-delete" id="icon-delete" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
        </symbol>
        <symbol class="icon icon-add" id="icon-add" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </symbol>
    </defs>
</svg>

<div class="logout">
    <form th:action="@{/logout}" method="post">
        <button class="btn-logout button" type="submit" value="Sign Out">
            <i class="fa-solid fa-right-from-bracket fa-flip-horizontal"></i>
            <span>Logout</span>
        </button>
    </form>
</div>

<!--<div class="header-right">-->
<!--    <p class="header-username">[[${username}]]</p>-->
<!--</div>-->

<header class="header">
    <h1>Todo List</h1>
</header>
<main class="main">
    <form class="todo-form" th:action="@{/todo}" method="post">
        <input type="text" th:name="content" id="todo-input" class="todo-input"/>
        <button id="todo-submit" class="button todo-submit" type="submit" aria-label="add">
            <svg class="icon">
                <use xlink:href="#icon-add"/>
            </svg>
        </button>
    </form>
    <section class="todos">
        <div class="filter">
            <div class="radio-option">
                <input type="radio" id="all" name="filter" value="all" checked>
                <label for="all" class="radio-label">All</label>
            </div>
            <div class="radio-option">
                <input type="radio" id="completed" name="filter" value="completed">
                <label for="completed" class="radio-label">Completed</label>
            </div>
            <div class="radio-option">
                <input type="radio" id="uncompleted" name="filter" value="uncompleted">
                <label for="uncompleted" class="radio-label">Uncompleted</label>
            </div>
        </div>

        <div class="todo-list" id="todo-list">
            <div th:each="todo : ${todos}">
                <div class="todo-form">
                    <form class="form-content" th:action="@{/api/todo/toggle/{id} (id=${todo.id})}" method="post">
                         <div th:switch="${todo.completed}">

                            <div class="todo" th:case="${true}">
                                <p th:inline='text' style="text-decoration: line-through; opacity: 0.4;"
                                   th:value="${todo.content}"
                                   class="todo-content" name="content" field="*{content}" tabindex="0">[[${todo.content}]]</p>
                                <button class="button todo-completed" aria-label="mark complete">
                                    <i class="fa-solid fa-xmark fa-xl"></i>
                                </button>
                            </div>

                            <div class="todo" th:case="*">
                                <p th:inline='text'
                                    th:value="${todo.content}" class="todo-content" name="content" field="*{content}" tabindex="0">[[${todo.content}]]</p>

                                <button class="button todo-completed" aria-label="mark complete">
                                    <i class="fa-solid fa-check fa-xl"></i>
                                </button>
                            </div>
                        </div>
                    </form>

                    <form class="btn_delete" th:action="@{/api/todo/delete/{id} (id=${todo.id})}" method="post">
                        <button class="button todo-delete" aria-label="mark complete">
                            <i class="fa-solid fa-trash-can fa-xl"></i>
                        </button>
                    </form>

                </div>
            </div>
        </div>

    </section>
</main>

</body>

<script src="/js/main-script.js"></script>

</html>